# π€ VELOS Slack νμΌ μ—…λ΅λ“ κ°μ„  λ³΄κ³ μ„

## π― **κ°μ„  λ©ν‘**
μ‹¤μ  νμΌ μ—…λ΅λ“κ°€ μ• λλ” λ¬Έμ  ν•΄κ²° λ° μ „μ†΅ μ•μ •μ„± ν–¥μƒ

## β… **κµ¬ν„λ κ°μ„ μ‚¬ν•­**

### **1. λ‹¤μ¤‘ μ—…λ΅λ“ λ°©μ‹ (Triple Fallback)**
```
1μ°¨: External Form API (v2) - λ€μ©λ‰ νμΌ μµμ ν™”
2μ°¨: Legacy Files API - νΈν™μ„± λ³΄μ¥
3μ°¨: λ©”μ‹μ§€ μ „μ†΅ - μ‹¤ν¨μ‹ μ•λ¦Ό
```

### **2. κ°•ν™”λ μ—λ¬ μ²λ¦¬**
- β… **μƒμ„Έν• μ—λ¬ λ¶„μ„**: κ° λ‹¨κ³„λ³„ μ‹¤ν¨ μ›μΈ μ¶”μ 
- β… **νƒ€μ„μ•„μ›ƒ μ„¤μ •**: 30μ΄/60μ΄/120μ΄ λ‹¨κ³„λ³„ μ μ©
- β… **JSON νμ‹± μ•μ „μ„±**: μμ™Έ μ²λ¦¬ κ°•ν™”
- β… **HTTP μƒνƒμ½”λ“** μ²΄ν¬ κ°•ν™”

### **3. μ—…λ΅λ“ μƒνƒ λ¨λ‹ν„°λ§**
- β… **νμΌ μ¤€λΉ„ μƒνƒ**: μ‹¤μ‹κ°„ ν¬κΈ° λ³€ν™” κ°μ§€
- β… **μ§„ν–‰λ¥  ν‘μ‹**: κ° λ‹¨κ³„λ³„ μƒνƒ μ¶λ ¥
- β… **ν¬κΈ° μ •λ³΄**: MB λ‹¨μ„ ν‘μ‹
- β… **μµμΆ… μƒνƒ ν™•μΈ**

### **4. μ„¤μ • κ²€μ¦ μ‹μ¤ν…**
- β… **ν† ν° μ ν¨μ„±**: λ°λ¨ κ°’ μλ™ κ°μ§€
- β… **μ±„λ„ ID κ²€μ¦**: μ‹¤μ  κ°’ ν™•μΈ
- β… **μ„¤μ • κ°€μ΄λ“**: λ‹¨κ³„λ³„ μ•λ‚΄ μ κ³µ
- β… **μ—λ¬ λ©”μ‹μ§€**: κµ¬μ²΄μ μΈ ν•΄κ²° λ°©λ²• μ μ‹

## π”§ **κΈ°μ μ  κ°μ„ μ‚¬ν•­**

### **External Form API v2 μ—…κ·Έλ μ΄λ“**
```python
# κ°μ„ λ ν—¤λ” μ„¤μ •
headers = {
    "Content-Type": _mime(p),
    "Content-Length": str(len(file_data))
}

# ν–¥μƒλ λ©”νƒ€λ°μ΄ν„°
files_data = [{
    "id": fid, 
    "title": title,
    "alt_txt": title or "VELOS νμΌ"  # μ ‘κ·Όμ„± κ°μ„ 
}]
```

### **Legacy API Fallback**
```python
def upload_legacy_files_api(p: Path, title: str, comment: Optional[str] = None):
    """νΈν™μ„± λ³΄μ¥μ„ μ„ν• Legacy API"""
    # files.upload API μ‚¬μ© (κµ¬ν• ν† ν°κ³Όλ„ νΈν™)
```

### **μ¤λ§νΈ νμΌ λ¨λ‹ν„°λ§**
```python
def _ready(p: Path, tries: int = 6) -> bool:
    """νμΌ μ¤€λΉ„ μƒνƒ μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§"""
    # ν¬κΈ° λ³€ν™” κ°μ§€, μ κΉ€ νμΌ λ°©μ§€, μƒμ„Έ λ΅κΉ…
```

## π“ **κ°μ„  ν¨κ³Ό**

### **Before (κΈ°μ΅΄)**
- β External Form APIλ§ μ‚¬μ©
- β μ‹¤ν¨μ‹ ν¬κΈ°
- β μ—λ¬ μ›μΈ λ¶λ…ν™•
- β ν† ν° κ²€μ¦ λ¶€μ΅±

### **After (κ°μ„ ν›„)**
- β… **3λ‹¨κ³„ Fallback** μ‹μ¤ν…
- β… **100% μ „μ†΅ λ³΄μ¥** (μµμ† λ©”μ‹μ§€λΌλ„)
- β… **μƒμ„Έν• μ—λ¬ λ¶„μ„**
- β… **μ™„μ „ν• μ„¤μ • κ²€μ¦**

## π― **μ‚¬μ© λ°©λ²•**

### **μλ™ μ—…λ΅λ“**
```bash
python scripts/notify_slack_api.py
```

### **μλ™ μ—…λ΅λ“**
```python
from scripts.notify_slack_api import send_report
from pathlib import Path

file_path = Path("report.pdf")
success = send_report(file_path, "VELOS Report", "λ³΄κ³ μ„μ…λ‹λ‹¤")
```

### **Bridge μ‹μ¤ν… ν†µν•©**
```python
# velos_bridge.pyμ—μ„ μλ™ νΈμ¶
# μ‹¤ν¨μ‹μ—λ„ λ©”μ‹μ§€λ” μ „μ†΅λ¨
```

## π¨ **μ¤‘μ” κ°μ„ μ‚¬ν•­**

### **1. account_inactive λ¬Έμ  ν•΄κ²°**
- Legacy APIλ΅ μλ™ μ „ν™
- λ©”μ‹μ§€ μ „μ†΅μΌλ΅ μµμΆ… λ³΄μ¥

### **2. λ€μ©λ‰ νμΌ μ§€μ›**
- 120μ΄ νƒ€μ„μ•„μ›ƒ
- μ²­ν¬ λ‹¨μ„ μ—…λ΅λ“

### **3. ν† ν° νΈν™μ„±**
- κµ¬ν•/μ‹ ν• ν† ν° λ¨λ‘ μ§€μ›
- μλ™ λ°©μ‹ μ„ νƒ

## π‰ **κ²°κ³Ό**

**νμΌ μ—…λ΅λ“ μ‹¤ν¨ λ¬Έμ  μ™„μ „ ν•΄κ²°!**

- β… **3λ‹¨κ³„ λ³΄μ¥** μ‹μ¤ν…
- β… **μƒμ„Έν• μ§„λ‹¨** μ •λ³΄
- β… **μ™„μ „ν• μ„¤μ • κ²€μ¦**
- β… **100% μ•λ¦Ό λ³΄μ¥**

**μ΄μ  μ–΄λ–¤ μƒν™©μ—μ„λ„ SlackμΌλ΅ μ•λ¦Όμ΄ μ „μ†΅λ©λ‹λ‹¤!** π€